<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ART Cinema v2</title>
    <style>
        :root { --primary: #e50914; --bg: #0b0b0b; --card: #1a1a1a; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; }
        
        /* Premium Header */
        header { padding: 25px; text-align: center; background: linear-gradient(to bottom, #141414, transparent); }
        .logo { font-size: 28px; font-weight: 900; color: var(--primary); letter-spacing: 2px; margin-bottom: 20px; }

        /* Search Bar */
        .search-box { position: relative; width: 90%; max-width: 500px; margin: 0 auto; }
        input { width: 100%; padding: 15px 20px; border-radius: 30px; border: 1px solid #333; background: rgba(255,255,255,0.1); color: white; outline: none; box-sizing: border-box; font-size: 16px; }
        input:focus { border-color: var(--primary); background: rgba(255,255,255,0.15); }

        /* Player Section */
        #player-container { display: none; width: 100%; background: #000; position: sticky; top: 0; z-index: 100; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        iframe { width: 100%; aspect-ratio: 16/9; border: none; }
        .close-player { padding: 10px; text-align: center; background: #222; font-size: 12px; cursor: pointer; color: #aaa; }

        /* Results Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 12px; padding: 20px; }
        .movie-card { background: var(--card); border-radius: 8px; overflow: hidden; transition: 0.3s; position: relative; }
        .movie-card:active { transform: scale(0.95); }
        .poster { width: 100%; aspect-ratio: 2/3; background: #222; object-fit: cover; }
        .info { padding: 8px; font-size: 11px; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .type-badge { position: absolute; top: 5px; right: 5px; background: var(--primary); font-size: 8px; padding: 2px 5px; border-radius: 3px; font-weight: bold; }
    </style>
</head>
<body>

<div id="player-container">
    <div class="close-player" onclick="closePlayer()">âœ– CLOSE PLAYER</div>
    <iframe id="video-frame" src="" allowfullscreen></iframe>
</div>

<header>
    <div class="logo">ART CINEMA</div>
    <div class="search-box">
        <input type="text" id="query" placeholder="Search Movies or TV Shows..." onkeyup="if(event.key==='Enter')search()">
    </div>
</header>

<div class="grid" id="results">
    </div>

<script>
    // Note: To get posters, we use TMDB. The player comes from nepu.to
    const TMDB_KEY = "8d6d9194546435662aa445a54e141c25"; // Public API Key for testing

    async function search() {
        const query = document.getElementById('query').value;
        const grid = document.getElementById('results');
        if(query.length < 2) return;

        grid.innerHTML = "<p style='text-align:center; width:100%;'>Searching...</p>";

        try {
            const resp = await fetch(`https://api.themoviedb.org/3/search/multi?api_key=${TMDB_KEY}&query=${encodeURIComponent(query)}`);
            const data = await resp.json();
            
            grid.innerHTML = data.results.map(item => {
                if(!item.poster_path) return '';
                const title = item.title || item.name;
                const type = item.media_type; // 'movie' or 'tv'
                return `
                    <div class="movie-card" onclick="playContent('${type}', '${item.id}')">
                        <div class="type-badge">${type.toUpperCase()}</div>
                        <img class="poster" src="https://image.tmdb.org/t/p/w200${item.poster_path}">
                        <div class="info">${title}</div>
                    </div>
                `;
            }).join('');
        } catch(e) {
            grid.innerHTML = "Search failed. Check internet.";
        }
    }

    function playContent(type, id) {
        const container = document.getElementById('player-container');
        const frame = document.getElementById('video-frame');
        
        // Nepu.to Embed Structure
        // Movies: https://nepu.to/embed/movie/ID
        // TV: https://nepu.to/embed/tv/ID/1/1 (Default to Season 1 Episode 1)
        let embedUrl = "";
        if(type === 'movie') {
            embedUrl = `https://nepu.to/embed/movie/${id}`;
        } else {
            embedUrl = `https://nepu.to/embed/tv/${id}/1/1`;
        }

        frame.src = embedUrl;
        container.style.display = "block";
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    function closePlayer() {
        const container = document.getElementById('player-container');
        const frame = document.getElementById('video-frame');
        frame.src = "";
        container.style.display = "none";
    }
</script>
</body>
</html>
