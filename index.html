<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ART CINEMA ONLINE</title>
    <style>
        :root { --primary: #e50914; --bg: #050505; --card: #121212; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 0; overflow-x: hidden; }
        
        /* Sticky Header */
        header { 
            position: sticky; top: 0; z-index: 1000;
            padding: 20px; text-align: center; 
            background: rgba(5, 5, 5, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #222;
        }
        .logo { font-size: 24px; font-weight: 900; color: var(--primary); letter-spacing: 3px; margin-bottom: 15px; }

        .search-container { position: relative; width: 90%; max-width: 600px; margin: 0 auto; display: flex; gap: 8px; }
        input { 
            flex: 1; padding: 12px 20px; border-radius: 8px; border: 1px solid #333; 
            background: #1a1a1a; color: white; font-size: 16px; outline: none;
        }
        input:focus { border-color: var(--primary); }
        button#searchBtn { 
            background: var(--primary); color: white; border: none; 
            border-radius: 8px; padding: 0 20px; font-weight: bold; cursor: pointer;
        }

        /* Video Player Overlay */
        #player-wrap { 
            display: none; width: 100%; background: #000; 
            position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 2000; 
        }
        iframe { width: 100%; height: 100%; border: none; }
        .close-btn { 
            position: absolute; top: 20px; right: 20px; 
            background: rgba(0,0,0,0.7); color: white; border: none;
            padding: 10px 15px; border-radius: 50%; font-size: 20px; cursor: pointer; z-index: 2001;
        }

        /* Movie Grid */
        .results-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); 
            gap: 15px; padding: 20px; 
        }
        .item { 
            background: var(--card); border-radius: 10px; overflow: hidden; 
            transition: transform 0.3s ease; position: relative; cursor: pointer;
        }
        .item:hover { transform: translateY(-5px); border: 1px solid var(--primary); }
        .item img { width: 100%; aspect-ratio: 2/3; object-fit: cover; }
        .item-info { padding: 10px; font-size: 12px; text-align: center; font-weight: bold; }
        
        .badge { 
            position: absolute; top: 5px; left: 5px; background: var(--primary);
            font-size: 10px; padding: 3px 7px; border-radius: 4px; font-weight: bold;
        }

        #status-msg { text-align: center; padding: 20px; color: #666; font-size: 14px; }
    </style>
</head>
<body>

<div id="player-wrap">
    <button class="close-btn" onclick="stopPlayer()">âœ•</button>
    <iframe id="video-frame" allowfullscreen></iframe>
</div>

<header>
    <div class="logo">ART CINEMA</div>
    <div class="search-container">
        <input type="text" id="userInput" placeholder="Search movies, TV shows..." onkeyup="if(event.key==='Enter')performSearch()">
        <button id="searchBtn" onclick="performSearch()">GO</button>
    </div>
</header>

<div id="status-msg">Search for a title to begin streaming</div>
<div class="results-grid" id="mainGrid"></div>

<script>
    const KEY = "8d6d9194546435662aa445a54e141c25"; // Secure TMDB API

    async function performSearch() {
        const query = document.getElementById('userInput').value;
        const grid = document.getElementById('mainGrid');
        const status = document.getElementById('status-msg');

        if(!query) return;
        
        status.innerText = "Searching global database...";
        grid.innerHTML = "";

        try {
            // Secure HTTPS request
            const apiURL = `https://api.themoviedb.org/3/search/multi?api_key=${KEY}&query=${encodeURIComponent(query)}&include_adult=false`;
            const response = await fetch(apiURL);
            const data = await response.json();

            if(!data.results || data.results.length === 0) {
                status.innerText = "No results found. Try a different title.";
                return;
            }

            status.innerText = "";
            grid.innerHTML = data.results.map(movie => {
                if(!movie.poster_path) return '';
                const name = movie.title || movie.name;
                const date = movie.release_date || movie.first_air_date || '';
                const year = date ? `(${date.split('-')[0]})` : '';
                const type = movie.media_type || (movie.title ? 'movie' : 'tv');

                return `
                    <div class="item" onclick="launchPlayer('${type}', '${movie.id}')">
                        <span class="badge">${type.toUpperCase()}</span>
                        <img src="https://image.tmdb.org/t/p/w300${movie.poster_path}" alt="${name}">
                        <div class="item-info">${name} ${year}</div>
                    </div>
                `;
            }).join('');

        } catch (error) {
            status.innerHTML = "<span style='color:red'>Connection Error. Check your internet.</span>";
            console.error(error);
        }
    }

    function launchPlayer(type, id) {
        const wrap = document.getElementById('player-wrap');
        const frame = document.getElementById('video-frame');
        
        // Nepu.to Embed Integration
        let streamURL = "";
        if(type === 'movie') {
            streamURL = `https://nepu.to/embed/movie/${id}`;
        } else {
            streamURL = `https://nepu.to/embed/tv/${id}/1/1`;
        }

        frame.src = streamURL;
        wrap.style.display = "block";
        document.body.style.overflow = "hidden"; // Prevent scrolling behind player
    }

    function stopPlayer() {
        const wrap = document.getElementById('player-wrap');
        const frame = document.getElementById('video-frame');
        frame.src = "";
        wrap.style.display = "none";
        document.body.style.overflow = "auto";
    }
</script>
</body>
</html>
